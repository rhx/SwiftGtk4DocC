{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"addPrivate"},{"kind":"text","text":"("},{"kind":"externalParam","text":"privateSize"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"},{"kind":"text","text":")"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"discussion","level":2,"type":"heading","text":"Discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When an object is allocated, the private structures for"},{"type":"text","text":" "},{"type":"text","text":"the type and all of its parent types are allocated"},{"type":"text","text":" "},{"type":"text","text":"sequentially in the same memory block as the public"},{"type":"text","text":" "},{"type":"text","text":"structures, and are zero-filled."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Note that the accumulated size of the private structures of"},{"type":"text","text":" "},{"type":"text","text":"a type and all its parent types cannot exceed 64 KiB."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This function should be called in the type’s "},{"type":"codeVoice","code":"class_init()"},{"type":"text","text":" function."},{"type":"text","text":" "},{"type":"text","text":"The private structure can be retrieved using the"},{"type":"text","text":" "},{"type":"codeVoice","code":"G_TYPE_INSTANCE_GET_PRIVATE()"},{"type":"text","text":" macro."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The following example shows attaching a private structure"},{"type":"text","text":" "},{"type":"text","text":"MyObjectPrivate to an object MyObject defined in the standard"},{"type":"text","text":" "},{"type":"text","text":"GObject fashion in the type’s "},{"type":"codeVoice","code":"class_init()"},{"type":"text","text":" function."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Note the use of a structure member “priv” to avoid the overhead"},{"type":"text","text":" "},{"type":"text","text":"of repeatedly calling "},{"type":"codeVoice","code":"MY_OBJECT_GET_PRIVATE()"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"(C Language Example):"}]},{"type":"codeListing","syntax":"C","code":["typedef struct _MyObject        MyObject;","typedef struct _MyObjectPrivate MyObjectPrivate;","","struct _MyObject {"," GObject parent;",""," MyObjectPrivate *priv;","};","","struct _MyObjectPrivate {","  int some_field;","};","","static void","my_object_class_init (MyObjectClass *klass)","{","  g_type_class_add_private (klass, sizeof (MyObjectPrivate));","}","","static void","my_object_init (MyObject *my_object)","{","  my_object->priv = G_TYPE_INSTANCE_GET_PRIVATE (my_object,","                                                 MY_TYPE_OBJECT,","                                                 MyObjectPrivate);","  \/\/ my_object->priv->some_field will be automatically initialised to 0","}","","static int","my_object_get_some_field (MyObject *my_object)","{","  MyObjectPrivate *priv;","","  g_return_val_if_fail (MY_IS_OBJECT (my_object), 0);","","  priv = my_object->priv;","","  return priv->some_field;","}"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"add_private is deprecated:"}]},{"type":"text","text":" "},{"type":"text","text":"Use the G_ADD_PRIVATE() macro with the "},{"type":"codeVoice","code":"G_DEFINE_*"},{"type":"text","text":" "},{"type":"text","text":"family of macros to add instance private data to a type"}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/glibobject\/typeclassprotocol\/addprivate(privatesize:)"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/GLibObject\/documentation\/GLibObject\/TypeClassProtocol\/addPrivate(privateSize:)","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Registers a private structure for an instantiatable type."}],"kind":"symbol","metadata":{"modules":[{"name":"GLibObject"}],"role":"symbol","title":"addPrivate(privateSize:)","roleHeading":"Instance Method","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"addPrivate"},{"kind":"text","text":"("},{"kind":"externalParam","text":"privateSize"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"},{"kind":"text","text":")"}],"symbolKind":"method","externalID":"s:10GLibObject17TypeClassProtocolPAAE10addPrivate11privateSizeySi_tF","extendedModule":"GLibObject","platforms":[]},"hierarchy":{"paths":[["doc:\/\/GLibObject\/documentation\/GLibObject","doc:\/\/GLibObject\/documentation\/GLibObject\/TypeClassProtocol"]]},"references":{"doc://GLibObject/documentation/GLibObject":{"role":"collection","title":"GLibObject","abstract":[],"identifier":"doc:\/\/GLibObject\/documentation\/GLibObject","kind":"symbol","type":"topic","url":"\/documentation\/glibobject"},"doc://GLibObject/documentation/GLibObject/TypeClassProtocol":{"role":"symbol","title":"TypeClassProtocol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"TypeClassProtocol"}],"abstract":[{"type":"text","text":"An opaque structure used as the base of all classes."}],"identifier":"doc:\/\/GLibObject\/documentation\/GLibObject\/TypeClassProtocol","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TypeClassProtocol"}],"url":"\/documentation\/glibobject\/typeclassprotocol"},"doc://GLibObject/documentation/GLibObject/TypeClassProtocol/addPrivate(privateSize:)":{"role":"symbol","title":"addPrivate(privateSize:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"addPrivate"},{"kind":"text","text":"("},{"kind":"externalParam","text":"privateSize"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Registers a private structure for an instantiatable type."}],"identifier":"doc:\/\/GLibObject\/documentation\/GLibObject\/TypeClassProtocol\/addPrivate(privateSize:)","kind":"symbol","type":"topic","deprecated":true,"url":"\/documentation\/glibobject\/typeclassprotocol\/addprivate(privatesize:)"}}}