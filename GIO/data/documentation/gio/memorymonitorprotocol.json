{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"MemoryMonitorProtocol"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","identifier":"doc:\/\/GIO\/documentation\/GIO\/InitableProtocol","preciseIdentifier":"s:3GIO16InitableProtocolP","text":"InitableProtocol"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"There is also an implementation for use inside Flatpak sandboxes."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Possible actions to take when the signal is received are:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Free caches"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Save files that haven’t been looked at in a while to disk, ready to be reopened when needed"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Run a garbage collection cycle"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Try and compress fragmented allocations"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Exit on idle if the process has no reason to stay around"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Call "},{"type":"reference","isActive":true,"identifier":"man:malloc_trim"},{"type":"text","text":" to return cached heap pages to"},{"type":"text","text":" "},{"type":"text","text":"the kernel (if supported by your libc)"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Note that some actions may not always improve system performance, and so"},{"type":"text","text":" "},{"type":"text","text":"should be profiled for your application. "},{"type":"codeVoice","code":"malloc_trim()"},{"type":"text","text":", for example, may"},{"type":"text","text":" "},{"type":"text","text":"make future heap allocations slower (due to releasing cached heap pages back"},{"type":"text","text":" "},{"type":"text","text":"to the kernel)."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"See "},{"type":"codeVoice","code":"GMemoryMonitorWarningLevel"},{"type":"text","text":" for details on the various warning levels."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"(C Language Example):"}]},{"type":"codeListing","syntax":"C","code":["static void","warning_cb (GMemoryMonitor *m, GMemoryMonitorWarningLevel level)","{","  g_debug (\"Warning level: %d\", level);","  if (warning_level > G_MEMORY_MONITOR_WARNING_LEVEL_LOW)","    drop_caches ();","}","","static GMemoryMonitor *","monitor_low_memory (void)","{","  GMemoryMonitor *m;","  m = g_memory_monitor_dup_default ();","  g_signal_connect (G_OBJECT (m), \"low-memory-warning\",","                    G_CALLBACK (warning_cb), NULL);","  return m;","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Don’t forget to disconnect the "},{"type":"codeVoice","code":"GMemoryMonitor::low-memory-warning"},{"type":"text","text":" "},{"type":"text","text":"signal, and unref the "},{"type":"codeVoice","code":"GMemoryMonitor"},{"type":"text","text":" itself when exiting."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"MemoryMonitorProtocol"},{"type":"text","text":" protocol exposes the methods and properties of an underlying "},{"type":"codeVoice","code":"GMemoryMonitor"},{"type":"text","text":" instance."},{"type":"text","text":" "},{"type":"text","text":"The default implementation of these can be found in the protocol extension below."},{"type":"text","text":" "},{"type":"text","text":"For a concrete class that implements these methods and properties, see "},{"type":"codeVoice","code":"MemoryMonitor"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"Alternatively, use "},{"type":"codeVoice","code":"MemoryMonitorRef"},{"type":"text","text":" as a lighweight, "},{"type":"codeVoice","code":"unowned"},{"type":"text","text":" reference if you already have an instance you just want to use."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/gio\/memorymonitorprotocol"],"traits":[{"interfaceLanguage":"swift"}]}],"relationshipsSections":[{"identifiers":["doc:\/\/GIO\/4GLib14PointerWrapperP","doc:\/\/GIO\/documentation\/GIO\/InitableProtocol"],"kind":"relationships","title":"Inherits From","type":"inheritsFrom"},{"identifiers":["doc:\/\/GIO\/documentation\/GIO\/MemoryMonitor","doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorRef"],"kind":"relationships","title":"Conforming Types","type":"conformingTypes"}],"identifier":{"url":"doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorProtocol","interfaceLanguage":"swift"},"abstract":[{"type":"codeVoice","code":"GMemoryMonitor"},{"type":"text","text":" will monitor system memory and suggest to the application"},{"type":"text","text":" "},{"type":"text","text":"when to free memory so as to leave more room for other applications."},{"type":"text","text":" "},{"type":"text","text":"It is implemented on Linux using the "},{"type":"reference","isActive":true,"identifier":"https:\/\/gitlab.freedesktop.org\/hadess\/low-memory-monitor\/"},{"type":"text","text":" "},{"type":"text","text":"("},{"type":"reference","isActive":true,"identifier":"https:\/\/hadess.pages.freedesktop.org\/low-memory-monitor\/"},{"type":"text","text":")."}],"kind":"symbol","metadata":{"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"MemoryMonitorProtocol"}],"title":"MemoryMonitorProtocol","roleHeading":"Protocol","role":"symbol","symbolKind":"protocol","externalID":"s:3GIO21MemoryMonitorProtocolP","modules":[{"name":"GIO"}],"navigatorTitle":[{"kind":"identifier","text":"MemoryMonitorProtocol"}]},"hierarchy":{"paths":[["doc:\/\/GIO\/documentation\/GIO"]]},"topicSections":[{"title":"Instance Properties","identifiers":["doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorProtocol\/memory_monitor_ptr-2xide"]},{"title":"Instance Methods","identifiers":["doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorProtocol\/connect(signal:flags:data:destroyData:signalHandler:)","doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorProtocol\/connect(signal:flags:handler:)","doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorProtocol\/onLowMemoryWarning(flags:handler:)"]},{"title":"Type Properties","identifiers":["doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorProtocol\/lowMemoryWarningSignal"]}],"references":{"doc://GIO/documentation/GIO/MemoryMonitorProtocol/memory_monitor_ptr-2xide":{"defaultImplementations":1,"role":"symbol","title":"memory_monitor_ptr","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"memory_monitor_ptr"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafeMutablePointer","preciseIdentifier":"s:Sp"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"GMemoryMonitor"},{"kind":"text","text":">!"}],"abstract":[{"type":"text","text":"Typed pointer to the underlying "},{"type":"codeVoice","code":"GMemoryMonitor"},{"type":"text","text":" instance."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorProtocol\/memory_monitor_ptr-2xide","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/gio\/memorymonitorprotocol\/memory_monitor_ptr-2xide"},"man:malloc_trim":{"title":"malloc_trim(3)","titleInlineContent":[{"type":"codeVoice","code":"malloc_trim(3)"}],"type":"link","identifier":"man:malloc_trim","url":"man:malloc_trim"},"https://hadess.pages.freedesktop.org/low-memory-monitor/":{"title":"API documentation","titleInlineContent":[{"type":"text","text":"API documentation"}],"type":"link","identifier":"https:\/\/hadess.pages.freedesktop.org\/low-memory-monitor\/","url":"https:\/\/hadess.pages.freedesktop.org\/low-memory-monitor\/"},"https://gitlab.freedesktop.org/hadess/low-memory-monitor/":{"title":"Low Memory Monitor","titleInlineContent":[{"type":"text","text":"Low Memory Monitor"}],"type":"link","identifier":"https:\/\/gitlab.freedesktop.org\/hadess\/low-memory-monitor\/","url":"https:\/\/gitlab.freedesktop.org\/hadess\/low-memory-monitor\/"},"doc://GIO/documentation/GIO/MemoryMonitorProtocol/onLowMemoryWarning(flags:handler:)":{"role":"symbol","title":"onLowMemoryWarning(flags:handler:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"onLowMemoryWarning"},{"kind":"text","text":"("},{"kind":"externalParam","text":"flags"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ConnectFlags","preciseIdentifier":"s:10GLibObject12ConnectFlagsV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"handler"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"MemoryMonitorRef","preciseIdentifier":"s:3GIO16MemoryMonitorRefV"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"MemoryMonitorWarningLevel","preciseIdentifier":"s:3GIO25MemoryMonitorWarningLevela"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"}],"abstract":[{"type":"text","text":"Emitted when the system is running low on free memory. The signal"},{"type":"text","text":" "},{"type":"text","text":"handler should then take the appropriate action depending on the"},{"type":"text","text":" "},{"type":"text","text":"warning level. See the "},{"type":"codeVoice","code":"GMemoryMonitorWarningLevel"},{"type":"text","text":" documentation for"},{"type":"text","text":" "},{"type":"text","text":"details."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorProtocol\/onLowMemoryWarning(flags:handler:)","kind":"symbol","type":"topic","url":"\/documentation\/gio\/memorymonitorprotocol\/onlowmemorywarning(flags:handler:)"},"doc://GIO/documentation/GIO/MemoryMonitorRef":{"role":"symbol","title":"MemoryMonitorRef","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"MemoryMonitorRef"}],"abstract":[{"type":"codeVoice","code":"GMemoryMonitor"},{"type":"text","text":" will monitor system memory and suggest to the application"},{"type":"text","text":" "},{"type":"text","text":"when to free memory so as to leave more room for other applications."},{"type":"text","text":" "},{"type":"text","text":"It is implemented on Linux using the "},{"type":"reference","isActive":true,"identifier":"https:\/\/gitlab.freedesktop.org\/hadess\/low-memory-monitor\/"},{"type":"text","text":" "},{"type":"text","text":"("},{"type":"reference","isActive":true,"identifier":"https:\/\/hadess.pages.freedesktop.org\/low-memory-monitor\/"},{"type":"text","text":")."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorRef","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MemoryMonitorRef"}],"url":"\/documentation\/gio\/memorymonitorref"},"doc://GIO/documentation/GIO/MemoryMonitorProtocol/connect(signal:flags:handler:)":{"role":"symbol","title":"connect(signal:flags:handler:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"connect"},{"kind":"text","text":"("},{"kind":"externalParam","text":"signal"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"MemoryMonitorSignalName","preciseIdentifier":"s:3GIO23MemoryMonitorSignalNameO"},{"kind":"text","text":", "},{"kind":"externalParam","text":"flags"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ConnectFlags","preciseIdentifier":"s:10GLibObject12ConnectFlagsV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"handler"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"SignalHandler","preciseIdentifier":"s:10GLibObject13SignalHandlera"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"}],"abstract":[{"type":"text","text":"Connect a Swift signal handler to the given, typed "},{"type":"codeVoice","code":"MemoryMonitorSignalName"},{"type":"text","text":" signal"}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorProtocol\/connect(signal:flags:handler:)","kind":"symbol","type":"topic","url":"\/documentation\/gio\/memorymonitorprotocol\/connect(signal:flags:handler:)"},"doc://GIO/documentation/GIO/InitableProtocol":{"role":"symbol","title":"InitableProtocol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"InitableProtocol"}],"abstract":[{"type":"codeVoice","code":"GInitable"},{"type":"text","text":" is implemented by objects that can fail during"},{"type":"text","text":" "},{"type":"text","text":"initialization. If an object implements this interface then"},{"type":"text","text":" "},{"type":"text","text":"it must be initialized as the first thing after construction,"},{"type":"text","text":" "},{"type":"text","text":"either via "},{"type":"codeVoice","code":"g_initable_init()"},{"type":"text","text":" or "},{"type":"codeVoice","code":"g_async_initable_init_async()"},{"type":"text","text":" "},{"type":"text","text":"(the latter is only available if it also implements "},{"type":"codeVoice","code":"GAsyncInitable"},{"type":"text","text":")."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/InitableProtocol","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"InitableProtocol"}],"url":"\/documentation\/gio\/initableprotocol"},"doc://GIO/documentation/GIO/MemoryMonitorProtocol/lowMemoryWarningSignal":{"role":"symbol","title":"lowMemoryWarningSignal","fragments":[{"kind":"keyword","text":"static"},{"kind":"text","text":" "},{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"lowMemoryWarningSignal"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"MemoryMonitorSignalName","preciseIdentifier":"s:3GIO23MemoryMonitorSignalNameO"}],"abstract":[{"type":"text","text":"Typed "},{"type":"codeVoice","code":"low-memory-warning"},{"type":"text","text":" signal for using the "},{"type":"codeVoice","code":"connect(signal:)"},{"type":"text","text":" methods"}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorProtocol\/lowMemoryWarningSignal","kind":"symbol","type":"topic","url":"\/documentation\/gio\/memorymonitorprotocol\/lowmemorywarningsignal"},"doc://GIO/documentation/GIO":{"role":"collection","title":"GIO","abstract":[],"identifier":"doc:\/\/GIO\/documentation\/GIO","kind":"symbol","type":"topic","url":"\/documentation\/gio"},"doc://GIO/documentation/GIO/MemoryMonitorProtocol/connect(signal:flags:data:destroyData:signalHandler:)":{"role":"symbol","title":"connect(signal:flags:data:destroyData:signalHandler:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"connect"},{"kind":"text","text":"("},{"kind":"externalParam","text":"signal"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"MemoryMonitorSignalName","preciseIdentifier":"s:3GIO23MemoryMonitorSignalNameO"},{"kind":"text","text":", "},{"kind":"externalParam","text":"flags"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ConnectFlags","preciseIdentifier":"s:10GLibObject12ConnectFlagsV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"data"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"gpointer","preciseIdentifier":"c:gtypes.h@T@gpointer"},{"kind":"text","text":"!, "},{"kind":"externalParam","text":"destroyData"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"GClosureNotify","preciseIdentifier":"c:@T@GClosureNotify"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"signalHandler"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"GCallback","preciseIdentifier":"c:gclosure.h@T@GCallback"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Int","preciseIdentifier":"s:Si"}],"abstract":[{"type":"text","text":"Connect a C signal handler to the given, typed "},{"type":"codeVoice","code":"MemoryMonitorSignalName"},{"type":"text","text":" signal"}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorProtocol\/connect(signal:flags:data:destroyData:signalHandler:)","kind":"symbol","type":"topic","url":"\/documentation\/gio\/memorymonitorprotocol\/connect(signal:flags:data:destroydata:signalhandler:)"},"doc://GIO/documentation/GIO/MemoryMonitor":{"role":"symbol","title":"MemoryMonitor","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"MemoryMonitor"}],"abstract":[{"type":"codeVoice","code":"GMemoryMonitor"},{"type":"text","text":" will monitor system memory and suggest to the application"},{"type":"text","text":" "},{"type":"text","text":"when to free memory so as to leave more room for other applications."},{"type":"text","text":" "},{"type":"text","text":"It is implemented on Linux using the "},{"type":"reference","isActive":true,"identifier":"https:\/\/gitlab.freedesktop.org\/hadess\/low-memory-monitor\/"},{"type":"text","text":" "},{"type":"text","text":"("},{"type":"reference","isActive":true,"identifier":"https:\/\/hadess.pages.freedesktop.org\/low-memory-monitor\/"},{"type":"text","text":")."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/MemoryMonitor","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MemoryMonitor"}],"url":"\/documentation\/gio\/memorymonitor"},"doc://GIO/4GLib14PointerWrapperP":{"type":"unresolvable","title":"GLib.PointerWrapper","identifier":"doc:\/\/GIO\/4GLib14PointerWrapperP"},"doc://GIO/documentation/GIO/MemoryMonitorProtocol":{"role":"symbol","title":"MemoryMonitorProtocol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"MemoryMonitorProtocol"}],"abstract":[{"type":"codeVoice","code":"GMemoryMonitor"},{"type":"text","text":" will monitor system memory and suggest to the application"},{"type":"text","text":" "},{"type":"text","text":"when to free memory so as to leave more room for other applications."},{"type":"text","text":" "},{"type":"text","text":"It is implemented on Linux using the "},{"type":"reference","isActive":true,"identifier":"https:\/\/gitlab.freedesktop.org\/hadess\/low-memory-monitor\/"},{"type":"text","text":" "},{"type":"text","text":"("},{"type":"reference","isActive":true,"identifier":"https:\/\/hadess.pages.freedesktop.org\/low-memory-monitor\/"},{"type":"text","text":")."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/MemoryMonitorProtocol","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"MemoryMonitorProtocol"}],"url":"\/documentation\/gio\/memorymonitorprotocol"}}}