{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"init"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"SettingsSchemaSourceT"},{"kind":"text","text":">("},{"kind":"externalParam","text":"directory"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafePointer","preciseIdentifier":"s:SP"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:gtypes.h@T@gchar"},{"kind":"text","text":">!, "},{"kind":"externalParam","text":"parent"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"SettingsSchemaSourceT"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"trusted"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" "},{"kind":"keyword","text":"where"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"SettingsSchemaSourceT"},{"kind":"text","text":" : "},{"kind":"typeIdentifier","identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaSourceProtocol","preciseIdentifier":"s:3GIO28SettingsSchemaSourceProtocolP","text":"SettingsSchemaSourceProtocol"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"anchor":"discussion","level":2,"type":"heading","text":"Discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This function is not required for normal uses of "},{"type":"codeVoice","code":"GSettings"},{"type":"text","text":" but it"},{"type":"text","text":" "},{"type":"text","text":"may be useful to authors of plugin management systems."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The directory should contain a file called "},{"type":"codeVoice","code":"gschemas.compiled"},{"type":"text","text":" as"},{"type":"text","text":" "},{"type":"text","text":"produced by the "},{"type":"reference","isActive":true,"identifier":"#glib-compile-schemas"},{"type":"text","text":" tool."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If "},{"type":"codeVoice","code":"trusted"},{"type":"text","text":" is "},{"type":"codeVoice","code":"true"},{"type":"text","text":" then "},{"type":"codeVoice","code":"gschemas.compiled"},{"type":"text","text":" is trusted not to be"},{"type":"text","text":" "},{"type":"text","text":"corrupted. This assumption has a performance advantage, but can result"},{"type":"text","text":" "},{"type":"text","text":"in crashes or inconsistent behaviour in the case of a corrupted file."},{"type":"text","text":" "},{"type":"text","text":"Generally, you should set "},{"type":"codeVoice","code":"trusted"},{"type":"text","text":" to "},{"type":"codeVoice","code":"true"},{"type":"text","text":" for files installed by the"},{"type":"text","text":" "},{"type":"text","text":"system and to "},{"type":"codeVoice","code":"false"},{"type":"text","text":" for files in the home directory."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In either case, an empty file or some types of corruption in the file will"},{"type":"text","text":" "},{"type":"text","text":"result in "},{"type":"codeVoice","code":"G_FILE_ERROR_INVAL"},{"type":"text","text":" being returned."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"If "},{"type":"codeVoice","code":"parent"},{"type":"text","text":" is non-"},{"type":"codeVoice","code":"nil"},{"type":"text","text":" then there are two effects."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"First, if "},{"type":"codeVoice","code":"g_settings_schema_source_lookup()"},{"type":"text","text":" is called with the"},{"type":"text","text":" "},{"type":"codeVoice","code":"recursive"},{"type":"text","text":" flag set to "},{"type":"codeVoice","code":"true"},{"type":"text","text":" and the schema can not be found in the"},{"type":"text","text":" "},{"type":"text","text":"source, the lookup will recurse to the parent."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Second, any references to other schemas specified within this"},{"type":"text","text":" "},{"type":"text","text":"source (ie: "},{"type":"codeVoice","code":"child"},{"type":"text","text":" or "},{"type":"codeVoice","code":"extends"},{"type":"text","text":") references may be resolved"},{"type":"text","text":" "},{"type":"text","text":"from the "},{"type":"codeVoice","code":"parent"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For this second reason, except in very unusual situations, the"},{"type":"text","text":" "},{"type":"codeVoice","code":"parent"},{"type":"text","text":" should probably be given as the default schema source, as"},{"type":"text","text":" "},{"type":"text","text":"returned by "},{"type":"codeVoice","code":"g_settings_schema_source_get_default()"},{"type":"text","text":"."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/gio\/settingsschemasourceref\/init(directory:parent:trusted:)"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaSourceRef\/init(directory:parent:trusted:)","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Attempts to create a new schema source corresponding to the contents"},{"type":"text","text":" "},{"type":"text","text":"of the given directory."}],"kind":"symbol","metadata":{"role":"symbol","title":"init(directory:parent:trusted:)","roleHeading":"Initializer","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"SettingsSchemaSourceT"},{"kind":"text","text":">("},{"kind":"externalParam","text":"directory"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafePointer","preciseIdentifier":"s:SP"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:gtypes.h@T@gchar"},{"kind":"text","text":">!, "},{"kind":"externalParam","text":"parent"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"SettingsSchemaSourceT"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"trusted"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"symbolKind":"init","externalID":"s:3GIO23SettingsSchemaSourceRefV9directory6parent7trustedACSPys4Int8VGSg_xSgSbtKcAA0bcD8ProtocolRzlufc","extendedModule":"GIO","modules":[{"name":"GIO"}]},"hierarchy":{"paths":[["doc:\/\/GIO\/documentation\/GIO","doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaSourceRef"]]},"references":{"#glib-compile-schemas":{"title":"glib-compile-schemas","titleInlineContent":[{"type":"text","text":"glib-compile-schemas"}],"type":"link","identifier":"#glib-compile-schemas","url":"#glib-compile-schemas"},"doc://GIO/documentation/GIO":{"role":"collection","title":"GIO","abstract":[],"identifier":"doc:\/\/GIO\/documentation\/GIO","kind":"symbol","type":"topic","url":"\/documentation\/gio"},"doc://GIO/documentation/GIO/SettingsSchemaSourceRef/init(directory:parent:trusted:)":{"role":"symbol","title":"init(directory:parent:trusted:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"SettingsSchemaSourceT"},{"kind":"text","text":">("},{"kind":"externalParam","text":"directory"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"UnsafePointer","preciseIdentifier":"s:SP"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"gchar","preciseIdentifier":"c:gtypes.h@T@gchar"},{"kind":"text","text":">!, "},{"kind":"externalParam","text":"parent"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"SettingsSchemaSourceT"},{"kind":"text","text":"?, "},{"kind":"externalParam","text":"trusted"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"abstract":[{"type":"text","text":"Attempts to create a new schema source corresponding to the contents"},{"type":"text","text":" "},{"type":"text","text":"of the given directory."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaSourceRef\/init(directory:parent:trusted:)","kind":"symbol","type":"topic","url":"\/documentation\/gio\/settingsschemasourceref\/init(directory:parent:trusted:)"},"doc://GIO/documentation/GIO/SettingsSchemaSourceRef":{"role":"symbol","title":"SettingsSchemaSourceRef","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"SettingsSchemaSourceRef"}],"abstract":[{"type":"text","text":"This is an opaque structure type.  You may not access it directly."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaSourceRef","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SettingsSchemaSourceRef"}],"url":"\/documentation\/gio\/settingsschemasourceref"},"doc://GIO/documentation/GIO/SettingsSchemaSourceProtocol":{"role":"symbol","title":"SettingsSchemaSourceProtocol","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"SettingsSchemaSourceProtocol"}],"abstract":[{"type":"text","text":"This is an opaque structure type.  You may not access it directly."}],"identifier":"doc:\/\/GIO\/documentation\/GIO\/SettingsSchemaSourceProtocol","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SettingsSchemaSourceProtocol"}],"url":"\/documentation\/gio\/settingsschemasourceprotocol"}}}